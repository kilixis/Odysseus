<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        @font-face {
            font-family: "Odysseus";
            src: url("fonts/BlueScreenPersonalUseRegular-0W1M9.ttf");
        }

        * {
            margin: 0;
            padding: 0;
        }

        body {
            background-color: #111;
            height: 100vh;
            font-family: "Odysseus";
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            transition: background-image 0.3s ease;
        }

        h3 {
            font-size: 20px;
            letter-spacing: 1px;
            font-weight: 400;
        }

        .container {
            height: 600px;
            width: 450px;
            padding: 5px;
            display: flex;
            flex-direction: column;
            background-color: rgba(17, 17, 17, 0.9);
            border: #d16a00 solid 2px;
            clip-path: polygon(2% 0, 98% 0, 100% 2%, 100% 98%, 98% 100%, 2% 100%, 0 98%, 0 2%);
            backdrop-filter: blur(10px);
        }

        .selectors {
            width: 350px;
            display: flex;
            flex-direction: row;
            align-items: flex-end;
            margin-left: 20px;
        }

        #selector1 {
            cursor: pointer;
            transform: skewX(-20deg);
            height: 22px;
            width: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4px;
            margin-right: -2px;
            border: #d16a00 solid 2px;
        }

        #selector1 h3 {
            color: #d9d9d9;
            transform: skewX(20deg);
        }

        #selector2 {
            cursor: pointer;
            transform: skewX(-20deg);
            height: 22px;
            width: 80px;
            padding: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: #d16a00 solid 2px;
        }

        #selector2 h3 {
            transform: skewX(20deg);
            color: #d9d9d9;
        }

        .selected {
            width: 90px !important;
            height: 30px !important;
            background-color: #d16a00;
            color: #111;
        }

        .selected h3 {
            font-size: 24px !important;
        }

        #selector1:not(.selected):hover,
        #selector2:not(.selected):hover {
            background-color: #222;
        }

        h1 {
            font-size: 60px;
            margin-bottom: 30px;
            text-align: center;
            color: #d9d9d9;
        }

        ::-moz-selection {
            color: #111;
            background: #d16a00;
        }

        ::selection {
            color: #111;
            background: #d16a00;
        }

        .form-container {
            flex: 1;
            display: none;
            flex-direction: column;
            justify-content: flex-start;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .form-container.active {
            display: flex;
            opacity: 1;
        }

        .form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-size: 14px;
            margin-bottom: 8px;
            color: #d16a00;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
        }

        input {
            padding: 12px;
            background-color: rgba(34, 34, 34, 0.8);
            border: 1px solid #d16a00;
            color: white;
            font-family: "Odysseus", monospace;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        input:focus {
            border-color: #fff;
        }

        input::placeholder {
            color: #666;
        }

        .submit-btn {
            padding: 15px;
            background-color: #d16a00;
            color: #111;
            border: none;
            font-family: "Odysseus", monospace;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }

        .submit-btn:hover {
            background-color: #ff8000;
        }

        .submit-btn:disabled {
            background-color: #666;
            cursor: not-allowed;
        }

        .form-footer {
            text-align: center;
            margin-top: 20px;
            font-size: 12px;
            color: #666;
        }

        .form-footer a {
            color: #d16a00;
            text-decoration: none;
        }

        .form-footer a:hover {
            color: #ff8000;
            text-decoration: underline;
        }

        .password-strength {
            height: 3px;
            margin-top: 5px;
            background-color: #333;
            border-radius: 2px;
            overflow: hidden;
        }

        .strength-bar {
            height: 100%;
            width: 0%;
            transition: width 0.3s ease, background-color 0.3s ease;
        }

        .error-message {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .success-message {
            color: #27ae60;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #666;
            border-radius: 50%;
            border-top-color: #d16a00;
            animation: spin 1s ease-in-out infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
    <title>Odysseus</title>
</head>

<body>
    <div class="form-wrapper">
        <div class="selectors">
            <div id="selector1" class="selected">
                <h3 data-value="SIGN UP">SIGN UP</h3>
            </div>
            <div id="selector2">
                <h3 data-value="LOG IN">LOG IN</h3>
            </div>
        </div>
        <div class="container">
            <div class="form-container signup active" id="signup-form">
                <h1 data-value="ODYSSEUS">ODYSSEUS</h1>
                <form class="form" id="signupForm">
                    <div class="form-group">
                        <label for="signup-username" data-value="Username">Username</label>
                        <input type="text" id="signup-username" name="username" placeholder="Enter username" required>
                        <div class="error-message" id="username-error"></div>
                    </div>

                    <div class="form-group">
                        <label for="signup-email" data-value="Email">Email</label>
                        <input type="email" id="signup-email" name="email" placeholder="Enter email" required>
                        <div class="error-message" id="email-error"></div>
                    </div>

                    <div class="form-group">
                        <label for="signup-password" data-value="Password">Password</label>
                        <input type="password" id="signup-password" name="password" placeholder="Enter password"
                            required>
                        <div class="password-strength">
                            <div class="strength-bar" id="strength-bar"></div>
                        </div>
                        <div class="error-message" id="password-error"></div>
                    </div>

                    <div class="form-group">
                        <label for="signup-confirm-password" data-value="Confirm Password">Confirm Password</label>
                        <input type="password" id="signup-confirm-password" name="confirmPassword"
                            placeholder="Confirm password" required>
                        <div class="error-message" id="confirm-password-error"></div>
                    </div>

                    <button type="submit" class="submit-btn" id="signup-btn" data-value="Create Account">Create
                        Account</button>
                    <div class="success-message" id="signup-success"></div>
                </form>

                <div class="form-footer">
                    Already have an account? <a href="#" id="switch-to-login">Log in here</a>
                </div>
            </div>

            <div class="form-container login" id="login-form">
                <h1 data-value="ODYSSEUS">ODYSSEUS</h1>
                <form class="form" id="loginForm">
                    <div class="form-group">
                        <label for="login-email" data-value="Email">Email</label>
                        <input type="email" id="login-email" name="email" placeholder="Enter email" required>
                        <div class="error-message" id="login-email-error"></div>
                    </div>

                    <div class="form-group">
                        <label for="login-password" data-value="Password">Password</label>
                        <input type="password" id="login-password" name="password" placeholder="Enter password"
                            required>
                        <div class="error-message" id="login-password-error"></div>
                    </div>

                    <button type="submit" class="submit-btn" id="login-btn" data-value="Log In">Log In</button>
                    <div class="success-message" id="login-success"></div>
                </form>

                <div class="form-footer">
                    Don't have an account? <a href="#" id="switch-to-signup">Sign up here</a>
                </div>
            </div>
        </div>
    </div>
    <div id="image-trail"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -2;"></div>
    <script type="module">
        import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

        const SUPABASE_URL = "https://uhjiwkqhixyqcgbqgxjx.supabase.co";
        const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVoaml3a3FoaXh5cWNnYnFneGp4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY5MDM5MzQsImV4cCI6MjA3MjQ3OTkzNH0.miXfl_rool6fZfKNjZDqE6xl2B74f3wDBogvLNwPR40";

        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        const selector1 = document.getElementById('selector1');
        const selector2 = document.getElementById('selector2');
        const signupForm = document.getElementById('signup-form');
        const loginForm = document.getElementById('login-form');
        const switchToLogin = document.getElementById('switch-to-login');
        const switchToSignup = document.getElementById('switch-to-signup');
        const signupPassword = document.getElementById('signup-password');
        const strengthBar = document.getElementById('strength-bar');

        function switchForm(showSignup) {
            clearMessages();
            if (showSignup) {
                selector1.classList.add('selected');
                selector2.classList.remove('selected');
                signupForm.classList.add('active');
                loginForm.classList.remove('active');
            } else {
                selector2.classList.add('selected');
                selector1.classList.remove('selected');
                loginForm.classList.add('active');
                signupForm.classList.remove('active');
            }
        }

        function clearMessages() {
            document.querySelectorAll('.error-message, .success-message').forEach(el => {
                el.style.display = 'none';
                el.textContent = '';
            });
        }

        function showError(elementId, message) {
            const errorEl = document.getElementById(elementId);
            errorEl.textContent = message;
            errorEl.style.display = 'block';
        }

        function showSuccess(elementId, message) {
            const successEl = document.getElementById(elementId);
            successEl.textContent = message;
            successEl.style.display = 'block';
        }

        function setLoading(buttonId, isLoading) {
            const button = document.getElementById(buttonId);
            if (isLoading) {
                button.disabled = true;
                button.innerHTML = '<span class="loading"></span>Processing...';
            } else {
                button.disabled = false;
                button.innerHTML = buttonId === 'signup-btn' ? 'Create Account' : 'Log In';
            }
        }

        selector1.addEventListener('click', () => switchForm(true));
        selector2.addEventListener('click', () => switchForm(false));

        switchToLogin.addEventListener('click', (e) => {
            e.preventDefault();
            switchForm(false);
        });

        switchToSignup.addEventListener('click', (e) => {
            e.preventDefault();
            switchForm(true);
        });

        signupPassword.addEventListener('input', function () {
            const password = this.value;
            let strength = 0;

            if (password.length >= 8) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;

            const percentage = (strength / 5) * 100;
            strengthBar.style.width = percentage + '%';

            if (strength <= 2) {
                strengthBar.style.backgroundColor = '#e74c3c';
            } else if (strength <= 3) {
                strengthBar.style.backgroundColor = '#f39c12';
            } else {
                strengthBar.style.backgroundColor = '#27ae60';
            }
        });

        document.getElementById('signupForm').addEventListener('submit', async function (e) {
            e.preventDefault();
            clearMessages();

            const formData = new FormData(this);
            const username = formData.get('username');
            const email = formData.get('email');
            const password = formData.get('password');
            const confirmPassword = formData.get('confirmPassword');

            if (password !== confirmPassword) {
                showError('confirm-password-error', 'Passwords do not match!');
                return;
            }

            if (password.length < 6) {
                showError('password-error', 'Password must be at least 6 characters long');
                return;
            }

            setLoading('signup-btn', true);

            try {
                const { data, error } = await supabase.auth.signUp({
                    email: email,
                    password: password,
                    options: {
                        data: {
                            username: username
                        }
                    }
                });

                if (error) {
                    throw error;
                }

                if (data.user && !data.user.email_confirmed_at) {
                    showSuccess('signup-success', 'Account created! Please check your email to verify your account.');
                } else {
                    showSuccess('signup-success', 'Account created successfully!');
                }

                document.getElementById('signupForm').reset();
                strengthBar.style.width = '0%';

            } catch (error) {
                console.error('Signup error:', error);

                if (error.message.includes('already registered')) {
                    showError('email-error', 'Email is already registered');
                } else if (error.message.includes('Password')) {
                    showError('password-error', error.message);
                } else {
                    showError('email-error', error.message || 'An error occurred during signup');
                }
            } finally {
                setLoading('signup-btn', false);
            }
        });

        document.getElementById('loginForm').addEventListener('submit', async function (e) {
            e.preventDefault();
            clearMessages();

            const formData = new FormData(this);
            const email = formData.get('email');
            const password = formData.get('password');

            setLoading('login-btn', true);

            try {
                const { data, error } = await supabase.auth.signInWithPassword({
                    email: email,
                    password: password
                });

                if (error) {
                    throw error;
                }

                showSuccess('login-success', 'Login successful! Redirecting...');

                document.getElementById('loginForm').reset();

                setTimeout(() => {
                    window.location.href = 'home.html';
                }, 1500);

            } catch (error) {
                console.error('Login error:', error);

                if (error.message.includes('Invalid login credentials')) {
                    showError('login-password-error', 'Invalid email or password');
                } else {
                    showError('login-email-error', error.message || 'An error occurred during login');
                }
            } finally {
                setLoading('login-btn', false);
            }
        });

        function createHackedEffect(element) {
            const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            let interval = null;

            element.onmouseover = event => {
                let iteration = 0;
                const originalText = event.target.dataset.value;

                clearInterval(interval);

                interval = setInterval(() => {
                    event.target.innerText = originalText
                        .split("")
                        .map((letter, index) => {
                            if (index < iteration) {
                                return originalText[index];
                            }
                            return letters[Math.floor(Math.random() * 26)];
                        })
                        .join("");

                    if (iteration >= originalText.length) {
                        clearInterval(interval);
                    }

                    iteration += 1 / 3;
                }, 30);
            };
        }

        document.addEventListener('DOMContentLoaded', function () {
            const mainTitle = document.querySelector("h1[data-value='ODYSSEUS']");
            if (mainTitle) {
                createHackedEffect(mainTitle);
            }

            const labels = document.querySelectorAll('label[data-value]');
            labels.forEach(label => {
                createHackedEffect(label);
            });

            const buttons = document.querySelectorAll('.submit-btn[data-value]');
            buttons.forEach(button => {
                createHackedEffect(button);
            });

            const formWrapper = document.querySelector('.form-wrapper');

            if (formWrapper) {
                document.addEventListener('mousemove', function (e) {
                    const rect = formWrapper.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;

                    const deltaX = e.clientX - centerX;
                    const deltaY = e.clientY - centerY;

                    const moveX = deltaX * 0.01;
                    const moveY = deltaY * 0.01;

                    formWrapper.style.transform = `translate(${moveX}px, ${moveY}px)`;
                });

                document.addEventListener('mouseleave', function () {
                    formWrapper.style.transform = 'translate(0px, 0px)';
                });
                
                // Simplified trail effect with minimal DOM manipulation
                let nextImageIndex = 0;
                let lastSpawnTime = 0;
                let backgroundUpdateTime = 0;
                const spawnDelay = 500; // Much slower
                const backgroundUpdateDelay = 1000; // Very slow background updates
                
                const imagePaths = Array.from({ length: 14 }, (_, i) => `pics/${i + 1}.jpeg`);

                // Create only 3 trail images for minimal impact
                const trailImages = [];
                for (let i = 0; i < 3; i++) {
                    const img = document.createElement('div');
                    img.style.position = 'absolute';
                    img.style.width = '100px';
                    img.style.height = '100px';
                    img.style.backgroundSize = 'cover';
                    img.style.backgroundPosition = 'center';
                    img.style.opacity = '0';
                    img.style.pointerEvents = 'none';
                    img.style.transform = 'translate(-50%, -50%)';
                    img.style.borderRadius = '50%';
                    img.style.transition = 'opacity 0.1s ease-out';
                    document.getElementById('image-trail').appendChild(img);
                    trailImages.push(img);
                }

                let activeTrailIndex = 0;

                document.addEventListener('mousemove', (e) => {
                    const currentTime = Date.now();

                    // Very throttled trail effect
                    if (currentTime - lastSpawnTime > spawnDelay) {
                        const trail = trailImages[activeTrailIndex];
                        const currentImagePath = imagePaths[nextImageIndex];
                        
                        trail.style.backgroundImage = `url('${currentImagePath}')`;
                        trail.style.left = e.clientX + 'px';
                        trail.style.top = e.clientY + 'px';
                        trail.style.opacity = '0.3';

                        setTimeout(() => {
                            trail.style.opacity = '0';
                        }, 400);

                        activeTrailIndex = (activeTrailIndex + 1) % 3;
                        nextImageIndex = (nextImageIndex + 1) % imagePaths.length;
                        lastSpawnTime = currentTime;
                    }

                    // Very slow background updates
                    if (currentTime - backgroundUpdateTime > backgroundUpdateDelay) {
                        document.body.style.backgroundImage = `url('${imagePaths[nextImageIndex]}')`;
                        backgroundUpdateTime = currentTime;
                    }
                });
            }
        });
    </script>
</body>

</html>